<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speaker Study Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .module {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .module h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .audio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .audio-section {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: #fafafa;
        }
        
        .audio-section h3 {
            margin: 0 0 15px 0;
            color: #34495e;
            font-size: 1.2em;
            text-align: center;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
        }
        
        .model-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .model-folder {
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            padding: 8px;
            background: white;
            text-align: center;
        }
        
        .model-folder h4 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 0.9em;
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 3px;
        }
        
        .subfolder {
            margin-bottom: 8px;
        }
        
        .subfolder h5 {
            margin: 0 0 5px 0;
            color: #7f8c8d;
            font-size: 0.8em;
            text-align: center;
            background: #f8f9fa;
            padding: 2px 5px;
            border-radius: 2px;
        }
        
        .audio-item {
            margin-bottom: 5px;
        }
        
        .audio-item audio {
            width: 100%;
            height: 30px;
        }
        
        .empty-folder {
            color: #7f8c8d;
            font-style: italic;
            text-align: center;
            padding: 10px;
            font-size: 0.8em;
        }
        
        .gender-module {
            border-left: 4px solid #e74c3c;
        }
        
        .age-module {
            border-left: 4px solid #f39c12;
        }
        
        /* 新增摘要样式 */
        .abstract-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            margin: 30px 0;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .abstract-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
            pointer-events: none;
        }
        
        .abstract-title {
            font-size: 2.5em;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: -0.5px;
        }
        
        .abstract-subtitle {
            font-size: 1.1em;
            text-align: center;
            margin-bottom: 30px;
            opacity: 0.9;
            font-weight: 300;
            letter-spacing: 0.5px;
        }
        
        .abstract-content {
            max-width: 1000px;
            margin: 0 auto;
            line-height: 1.8;
            font-size: 1.1em;
            text-align: justify;
            position: relative;
            z-index: 1;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .abstract-keywords {
            margin-top: 25px;
            text-align: center;
        }
        
        .keyword-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            margin: 4px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        @media (max-width: 768px) {
            .abstract-section {
                padding: 25px;
                margin: 20px 0;
            }
            
            .abstract-title {
                font-size: 2em;
            }
            
            .abstract-content {
                padding: 20px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="abstract-section">
            <h1 class="abstract-title">Towards High-Fidelity Voice Attribute Editing</h1>
            <div class="abstract-content">
                We present a novel framework for voice attribute editing that alters speaker attributes, such as age and gender, while preserving other aspects of the speech. Despite a series of explorations in existing methods, two key challenges remain: the limited fidelity of generated speaker representations and the train–inference mismatch in speech reconstruction. To address these issues, we propose a high-fidelity speaker representation editing module with cyclic consistency training and adversarial learning, combined with a two-stage speech reconstruction strategy that decouples average acoustic feature reconstruction from speaker-specific detail generation. Experimental results on unseen datasets demonstrate that our approach outperforms state-of-the-art methods, delivering higher speech quality and more accurate speaker attribute editing.
            </div>
        </div>
        <!-- Gender Editing Module -->
        <div class="module gender-module">
            <h2>Gender Editing (Age Preserving)</h2>
            <h3>We use continuous gender labels, where [0,0] to [10,-10] represent masculine voices, and [0,0] to [-10,10] represent feminine voices. The greater the difference between the values in the first and second dimensions, the more likely the voice is to be classified by the attribute prediction model as belonging to a particular gender.</h3>
            <h3 style="text-align: center;">(Male)[10,-10]&lt;————————————[0,0]————————————&gt;[-10,10](Female)</h3>
            <div class="audio-grid" id="genderAudioSections">
                <!-- 动态生成的内容 -->
            </div>
        </div>
        
        <!-- Age Editing Module -->
        <div class="module age-module">
            <h2>Age Editing (Gender Preserving)</h2>
            <!-- <h3 style="text-align: center;">12 ———————————— 35 ———————————— 55 ———————————— 75</h3> -->
            <div class="audio-grid" id="ageAudioSections">
                <!-- 动态生成的内容 -->
            </div>
        </div>
    </div>

    <script>
        // JavaScript variables as specified
        age_wavs = ["p268_273_mic2", "p273_006_mic2"]
        gender_wavs = ["p231_185_mic1", "p226_301_mic2"]
        
        // 文件夹配置
        const folders = ['GT', 'nansy++', 'voiceshop', 'proposed']
        
        // 年龄编辑的子文件夹
        const ageSubfolders = ['12', '35', '55', '75']
        
        // 生成性别编辑音频文件的HTML
        function generateGenderAudioSectionHTML(audioFile) {
            // 提取说话人ID（如 p226_301_mic2 -> p226）
            const speakerId = audioFile.split('_')[0];
            
            let html = `<div class="audio-section">
                <h3>${speakerId}</h3>
                <div class="model-comparison">`
            
            folders.forEach(folderName => {
                html += `<div class="model-folder">
                    <h4>${folderName}</h4>`
                
                if (folderName === 'GT') {
                    // GT文件夹只有g子文件夹，用txt文件内容替换g标签
                    let txtContent = 'g' // 默认值
                    
                    // 硬编码txt文件内容作为备选方案
                    if (audioFile === 'p226_301_mic2') {
                        txtContent = 'gender: [5.4, -8.0]<br>age: 22'
                    } else if (audioFile === 'p231_185_mic1') {
                        txtContent = 'gender: [-4.5, 3.5]<br>age: 23'
                    }
                    
                    html += `<div class="subfolder">
                        <h5 id="gt-label-${audioFile}">${txtContent}</h5>
                        <div class="audio-item">
                            <audio controls>
                                <source src="${folderName}/g/${audioFile}.wav" type="audio/wav">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>`
                } else {
                    // 其他模型有[-10,10], [0,0], [10,-10]三个子文件夹
                    let subfolders = ['[-10,10]', '[0,0]', '[10,-10]']
                    
                    // 如果是p231音频文件，调整显示顺序为[10,-10], [0,0], [-10,10]
                    if (audioFile === 'p231_185_mic1') {
                        subfolders = ['[10,-10]', '[0,0]', '[-10,10]']
                    }
                    
                    subfolders.forEach(subfolder => {
                        html += `<div class="subfolder">
                            <h5>tar_gender:${subfolder}</h5>
                            <div class="audio-item">
                                <audio controls>
                                    <source src="${folderName}/${subfolder}/${audioFile}.wav" type="audio/wav">
                                    Your browser does not support the audio element.
                                </audio>
                            </div>
                        </div>`
                    })
                }
                
                html += `</div>`
            })
            
            html += `</div></div>`
            return html
        }
        
        // 生成年龄编辑音频文件的HTML
        function generateAgeAudioSectionHTML(audioFile) {
            // 提取说话人ID（如 p268_273_mic2 -> p268）
            const speakerId = audioFile.split('_')[0];
            
            let html = `<div class="audio-section">
                <h3>${speakerId}</h3>
                <div class="model-comparison">`
            
            folders.forEach(folderName => {
                html += `<div class="model-folder">
                    <h4>${folderName}</h4>`
                
                if (folderName === 'GT') {
                    // GT文件夹只有a子文件夹，用txt文件内容替换a标签
                    let txtContent = 'a' // 默认值
                    
                    // 硬编码txt文件内容作为备选方案
                    if (audioFile === 'p268_273_mic2') {
                        txtContent = 'gender: [-8.3, 8.3]<br>age: 23'
                    } else if (audioFile === 'p273_006_mic2') {
                        txtContent = 'gender: [8.6, -10.6]<br>age: 23'
                    }
                    
                    html += `<div class="subfolder">
                        <h5 id="gt-label-${audioFile}">${txtContent}</h5>
                        <div class="audio-item">
                            <audio controls>
                                <source src="${folderName}/a/${audioFile}.wav" type="audio/wav">
                                Your browser does not support the audio element.
                            </audio>
                        </div>
                    </div>`
                } else {
                    // 其他模型有12, 35, 55, 75四个子文件夹
                    ageSubfolders.forEach(subfolder => {
                        html += `<div class="subfolder">
                            <h5>tar_age:${subfolder}</h5>
                            <div class="audio-item">
                                <audio controls>
                                    <source src="${folderName}/${subfolder}/${audioFile}.wav" type="audio/wav">
                                    Your browser does not support the audio element.
                                </audio>
                            </div>
                        </div>`
                    })
                }
                
                html += `</div>`
            })
            
            html += `</div></div>`
            return html
        }
        
        // 加载音频文件
        function loadAudioFiles() {
            console.log("Gender audio files:", gender_wavs);
            console.log("Age audio files:", age_wavs);
            
            // 生成Gender Editing模块
            const genderContainer = document.getElementById('genderAudioSections')
            let genderHTML = ''
            if (gender_wavs.length === 0) {
                genderHTML = '<div class="audio-section"><h3>No gender audio files available</h3></div>'
            } else {
                gender_wavs.forEach(audioFile => {
                    genderHTML += generateGenderAudioSectionHTML(audioFile)
                })
            }
            genderContainer.innerHTML = genderHTML
            
            // 生成Age Editing模块
            const ageContainer = document.getElementById('ageAudioSections')
            let ageHTML = ''
            if (age_wavs.length === 0) {
                ageHTML = '<div class="audio-section"><h3>No age audio files available</h3></div>'
            } else {
                age_wavs.forEach(audioFile => {
                    ageHTML += generateAgeAudioSectionHTML(audioFile)
                })
            }
            ageContainer.innerHTML = ageHTML
        }
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', loadAudioFiles);
    </script>
</body>
</html>